<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Usuarios</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/estilo.css" />
    <link rel="shortcut icon" href="./Img/logo.png">
<script type="text/javascript" src="https://gc.kes.v2.scr.kaspersky-labs.com/7EA5E9BB-55E1-4C31-9C21-4943DDFED2E4/main.js?attr=RY7tG1P83JZqMJSMz-gRKQZLdpCBdvl3wiur-qb79pf15Yk1nkQX6nDA_5aCCTiAeti4vIiIDfJTAk6iRCHskLEFXFEvFPXK-ak5D9YvL2ZzzODbWGlsufdPXmf2mIxNQLJ7SFVcUM7_xOIguIOiz2Rd5v71AaEItRTkBbI7jJZohnrP_NpLdavDj5Ni1z7GYgS7AspCmOPp8JC2nNika2b-gomv09jtcM2Pg0Wp0mrse7S6hkE9iK23hy-47lZeZCHxr8cJynbmaN_HM4NiymQZ7XKnTmE7DMn4O6kxD24Qv5bW1Qiuya_4OinUkcLjUywULzMKLTtbu3LycijpN5rHlaub0af8uRuc752kLHp_0db4TLpKybyLLev9gzxelXCRnE-TOYYr6Wy7ZQ7RUvTOaTZiAsLzD2y9AA60rhT_tXcUIHBZNDana_bKASuqQdanZtmeKB65wDIxlnbyKrkcoi6PfgKqJ7sozhrYouEYxrlq-F1ZIzDgs5sQIxIgSzNh42pn6biEnowh64FVylzmk0yfOUadutDlkSO8gdkF4H1X8IWPwM6MmT1kpEW93KIFAX05f5YK9XVr_lWR1IfV_qkkRpd7L9k-qkr3u_rMeiTjbD62rNBicHExyBcuNeLcDQYzEILNd2Otva-xpQBQkKFFGxJdDK_-oNj9bpLwkVvTxz5Tcl6ihWRaqQkfuNhhFq-MfY9MEBCdEXbIyb_Q0awppUS8-hpWK0RhCn1L279ozxKYQ5cwm3xHw2pwnBfw7_LzdzDpy6u9For6-a-ro532fI7DPVLX4a8NmayFaFD9TgkOH--s2KJ3kuCF6CeSUw5MKeSX1SY2q9MR93qh53SI78Rr_-6V46cHXOk3WCF71ZUIZlRGhJInVZI5qQiJ9L5vYN563cpPd1d7zsP70rDY7e_qktvwAzQLImA8AqozbZ697xmpD8vqiskkkTERcRk__N488oKBCogzmHF_CkxPpC1pJ2Wcnt3_2LGE38r0Ldoj8N5K70IzXqVh3lyO06EyhSGh9JCmXhYp2FbaguGN_oNVxYVZQ53Hu3y0A-DP0Ax9WpahvROljB_wOs1KuFjdZhzK6LFiGOGhx96S60PXZg_vPXBNslfSvODGnBNPaB4Wly8gS7LSfCDvnIyHHCK18NsveWh62V7C0915zBeuczdPmHCS-9osyDqtZvAUzjM-NYTnJorXXUczAttUUeqMjGUy-3xOHIR-zk5YRxLxfJu5gzbl8Zu_ufiS9pRiNH3IU9sZHNIZIRj14nvk0AvUkW4epAUvLYzMkhnpADWVUw6aoNopRTVijydoaIn7nuqwPGlT9bNlj3s8JZErmamCbfcg9vPD_YDsSR7yMAmrF3aEaMtr_RwhVGVXfxYn2l-_KSbnXl2Ji2Ipz-hc7KpNyO6OR7mLqf7q6fdLJPoThoSPwUU6ajqRVAqPh2VRl0qCBHzpmK4mc2cUQJZjUoTaE-cg8TnKx2_GxENB5zZ0XjPYP1uZZNYk-fw7A8ghO9e7Qyioh9MpIX6_-mDI6tAt2heU7Ii0HvHabt5bcdeoLI5m-KvTNXdpNucN2onhcFaAG9Zz6VNALp1m04NZIDvpaOep3lCXBe8ByeasVfDL8sHZt8kzB9D2B-_jyO-7xas9D3Ts0CAnmpD42Pg0DcPSA3aCb-bcV-P5EPuumDqoYBBb8Sd2WuMTx9eMQsAgbnhd4c6JtWc97SZ5OSE9G1Ls0NHmYyWjPq5QlMi6Uq183BlzYN1ge78z_YT6H7Utxd3K-1xa1pXvGSfYw1Jcr0-YtLnwUkTt0R_3fna-lOuklmV18tukDR87bfo" charset="UTF-8"></script></head>

<body>
    <div class="wrapper">
        <!-- Barra de navegación -->
        <nav id="sidebar">
            <div class="d-flex">
                <button class="toggle-btn" type="button">
                    <i class='bx bxs-grid-alt bx-rotate-90'></i>
                </button>
                <div class="sidebar-logo">
                    <a href="./Inicio.html">Inicio</a>
                </div>
            </div>
            <ul class="sidebar-nav">
                <li class="sidebar-item">
                    <a href="./usuarios.html" class="sidebar-link">
                        <i class='bx bxs-group'></i>
                        <span>Usuarios</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="./bodegas.html" class="sidebar-link">
                        <i class='bx bxs-store-alt'></i>
                        <span>Bodegas</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="./cajas.html" class="sidebar-link">
                        <i class='bx bx-package'></i>
                        <span>Cajas</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="./piezas.html" class="sidebar-link">
                        <i class='bx bx-extension'></i>
                        <span>Piezas</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="./solicitudes.html" class="sidebar-link">
                        <i class='bx bx-user-voice'></i>
                        <span>Solicitudes</span>
                    </a>
                </li>

            </ul>
            <div class="sidebar-footer align-bottom ">
                <a href="./index.html" class="sidebar-link">
                    <i class='bx bx-log-out'></i>
                    <span>Salir</span>
                </a>
            </div>
        </nav>
        <!-- Fin Barra de navegación -->
        <!-- Tabla Consulta -->
        <div class="main main-tb-users">
            <div class="d-grid gap-2 d-md-flex justify-content-md-end d-flex ">
                <table id="tablaUsuarios" class=" table table-responsive container text-center mt-5 ">
                    <thead class="th-primary">
                        <tr class="flex-row">
                            <th scope="col">Id</th>
                            <th scope="col">Nombre</th>
                            <th scope="col">Usuario</th>
                            <th scope="col">Contraseña</th>
                            <th scope="col">Rol</th>
                            <th colspan="2">Opciones</th>
                            <th scope="col">
                                <!-- Boton botón modal registro usuarios -->
                                <button type="button" class="btn btn-success btn-sm botoncre" data-bs-toggle="modal"
                                    data-bs-target="#exampleModal">
                                    Crear Usuario
                                </button>
                                <!-- Fin botón modal registro usuarios -->
                                <!-- Modal registro usuarios -->
                                <div class="modal fade" id="exampleModal" tabindex="-1"
                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLabel">Registro de usuario</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                    aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <form action="/validar" method="post">
                                                    <div class="input-group mb-3">
                                                        <span class="input-group-text">
                                                            <i class='bx bx-id-card'></i>
                                                        </span>
                                                        <input type="number" name="id" id="id"
                                                            class="form-control form-control-md fs-6"
                                                            placeholder="Cedula" />
                                                    </div>
                                                    <div class="input-group mb-3">
                                                        <span class="input-group-text">
                                                            <i class="bx bx-user"></i>
                                                        </span>
                                                        <input type="text" name="nombre" id="nombre"
                                                            class="form-control form-control-md fs-6"
                                                            placeholder="Nombre" />
                                                    </div>
                                                    <div class="input-group mb-3">
                                                        <span class="input-group-text">
                                                            <i class='bx bxs-user-badge'></i>
                                                        </span>
                                                        <input type="text" name="nombreUsuario" id="nombreUsuario"
                                                            class="form-control form-control-md fs-6"
                                                            placeholder="Usuario" />
                                                    </div>
                                                    <div class="input-group mb-3">
                                                        <span class="input-group-text">
                                                            <i class="bx bx-lock-alt"></i>
                                                        </span>
                                                        <input type="password" name="contrasena" id="contrasena"
                                                            class="form-control form-control-md fs-6"
                                                            placeholder="Contraseña" />
                                                    </div>
                                                    <div class="input-group mb-3">
                                                        <span class="input-group-text">
                                                            <i class="bx bx-lock-alt"></i>
                                                        </span>
                                                        <input type="password" class="form-control form-control-md fs-6"
                                                            placeholder="Repetir contraseña" />
                                                    </div>
                                                    <div class="input-group mb-3">
                                                        <span class="input-group-text">
                                                            <i class='bx bxs-user-detail'></i>
                                                        </span>
                                                        <select name="rol" id="rol" class="form-select form-select-md">
                                                            <option selected>Rol</option>
                                                            <option>Administrador</option>
                                                            <option>Coordinador</option>
                                                            <option>Técnico</option>
                                                        </select>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary"
                                                            data-bs-dismiss="modal">Cerrar</button>
                                                        <button type="submit" name="registrar" id="registrar" value=""
                                                            class="btn btn-primary">Registrar</button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Fin Modal registro usuarios -->
                            </th>
                        </tr>
                    </thead>
                    <!-- Contenido tabla consulta -->
                    <tbody class="table-group-divider ">
                        <!--   <tr>
                            <th scope="row"><input type="checkbox"></th>
                            <th scope="row">12423</th>
                            <td>Fabian Amaya</td>
                            <td>faanam</td>
                            <td>********</td>
                            <td>Administrador</td>
                            <td><a id="Ingresar" class="btn btn-sm btn-danger botoneliminar">Eliminar</a></td>
                            <td><a id="Ingresar" class="btn btn-sm btn-primary botonmod">Modificar</a></td>
                        </tr>
                        <tr>
                            <th scope="row"><input type="checkbox"></th>
                            <th scope="row">25345</th>
                            <td>Sebastian Escobar</td>
                            <td>jusees</td>
                            <td>********</td>
                            <td>Técnico</td>
                            <td><a id="Ingresar" class="btn btn-sm btn-danger  botoneliminar">Eliminar</a></td>
                            <td><a id="Ingresar" class="btn btn-sm btn-primary botonmod">Modificar</a></td>
                        </tr>
                        <tr>
                            <th scope="row"><input type="checkbox"></th>
                            <th scope="row">35456</th>
                            <td>Jessica Romero</td>
                            <td>jekaro</td>
                            <td>********</td>
                            <td>Coordinador</td>
                            <td><a id="Ingresar" class="btn btn-sm btn-sm btn-danger  botoneliminar">Eliminar</a></td>
                            <td><a id="Ingresar" class="btn btn-sm btn-sm btn-primary botonmod">Modificar</a></td>
                        </tr>
                        <tr>
                            <th scope="row"><input type="checkbox"></th>
                            <th scope="row">44556</th>
                            <td>Mario Escobar</td>
                            <td>maales</td>
                            <td>********</td>
                            <td>Administrador</td>
                            <td><a id="Ingresar" class="btn btn-sm btn-danger botoneliminar">Eliminar</a></td>
                            <td><a id="Ingresar" class="btn btn-sm btn-primary botonmod">Modificar</a></td>
                        </tr> -->
                    </tbody>
                    <!-- Fin Contenido tabla consulta -->
                </table>
            </div>
        </div>
        <!-- Fin Tabla Consulta -->
    </div>
    <!-- Script -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Hacer una solicitud AJAX para obtener los datos de los usuarios
            fetch('/obtener-usuarios')
                .then(response => response.json())
                .then(data => {
                    // Llenar la tabla con los datos obtenidos
                    const tablaUsuarios = document.getElementById('tablaUsuarios');
                    const tbody = tablaUsuarios.querySelector('tbody');
                    tbody.innerHTML = ''; // Limpiar el contenido existente
    
                    data.forEach(usuario => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${usuario.id}</td>
                            <td>${usuario.nombre}</td>
                            <td>${usuario.nombreUsuario}</td>
                            <td>${usuario.contrasena}</td>
                            <td>${usuario.rol}</td>
                            <td>
                                <button class="btn btn-sm btn-danger botoneliminar" onclick="eliminarUsuario(${usuario.id})">Eliminar</button>
                                <button class="btn btn-sm btn-primary botonmod" onclick="modificarUsuario(${usuario.id})">Modificar</button>
                            </td>
                        `;
                        tbody.appendChild(row);
                    });
                })
                .catch(error => console.error('Error al obtener usuarios:', error));
        });
    
        function eliminarUsuario(id) {
            // Confirmar con el usuario si realmente desea eliminar el registro
            if (confirm("¿Estás seguro de que deseas eliminar este usuario?")) {
                // Hacer una solicitud AJAX al servidor para eliminar el usuario
                fetch(`/eliminar-usuario/${id}`, {
                    method: 'DELETE'
                })
                .then(response => {
                    if (response.ok) {
                        // Recargar la página o actualizar la lista de usuarios después de la eliminación
                        location.reload();
                    } else {
                        console.error('Error al eliminar usuario');
                    }
                })
                .catch(error => console.error('Error al eliminar usuario:', error));
            }
          }
    
        // Función para modificar un usuario
        function modificarUsuario(id) {
            // Aquí puedes agregar lógica para enviar una solicitud al servidor para modificar el usuario con el ID especificado
            console.log('Modificar usuario con ID:', id);
        }
    </script>
    








    
    <script src="script.js"> </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <!-- Fin Script -->
</body>
<!-- Footer -->
<div class="">
    <div class=" content-align-center  fixed-bottom z-2 ">
        <footer class="f-icee text-light">
            <div class="align-content-center d-flex flex-row  justify-content-center vh-0 g-0 ">
                <div class="f-content  mt-2">
                    <p>
                        2024 - Icee electronics SAS
                    </p>
                </div>
            </div>
        </footer>
    </div>
</div>
<!-- Fin Footer -->

</html>